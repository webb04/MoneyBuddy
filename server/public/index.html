<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Money Buddy</title>
    <script src="https://rawgit.com/aframevr/aframe/917c06889ee1f3f79b7b1bbd9eab9815f9512503/dist/aframe.min.js"></script>
    <script src="build.js"></script>
    <script src="https://cdn.rawgit.com/AdaRoseEdwards/facetype-fonts-for-a-frame/master/Dawning-of-a-New-Day_Regular.js"></script>
    <script src="https://cdn.rawgit.com/AdaRoseEdwards/facetype-fonts-for-a-frame/master/Exo%202%20Black_Regular.js"></script>
    <script src="https://cdn.rawgit.com/AdaRoseEdwards/facetype-fonts-for-a-frame/master/Exo%202_Bold%20Italic.js"></script>
  </head>
  <body>
    <a-scene inspector="url: https://aframe.io/aframe-inspector/dist/aframe-inspector.min.js">
      <a-assets>
        <img id="pink" src="https://img.gs/bbdkhfbzkk/stretch/http://i.imgur.com/1hyyIUi.jpg" crossorigin="anonymous" />
        <img src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" id="grid" crossorigin="anonymous">
        <img src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg" id="chrome" crossorigin="anonymous">
        <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
      </a-assets>

      <a-entity position="-1.5 12 0" text="text: £500.77; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-1.5 12 0" text="text: £500; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>

      <a-entity position="-13.8 8 -6" scale="1.9 2.2 1" text="text: Money   Buddy; font: exo 2 black; bevelEnabled: true; bevelSize: 0.1; bevelThickness: 0.1; curveSegments: 1; size: 1.5; height: 0.5;" material="color:pink; metalness:0.9; roughness: 0.05; sphericalEnvMap: #chrome;"></a-entity>

      <!-- BAR GRAPH  -->
      <a-entity position="-27 15 36" scale="1.2 1.5 1" rotation="0 90 0" text="text: Recent Transactions; font: exo 2 black; bevelEnabled: true; bevelSize: 0.1; bevelThickness: 0.1; curveSegments: 1; size: 1.5; height: 0.5;" material="color:pink; metalness:0.9; roughness: 0.05; sphericalEnvMap: #chrome;"></a-entity>
  
      <a-box position="-27 0.8 13" rotation="0 90 0" width="2" height="1.6" depth="1"  color="yellow"></a-box>
      <a-box position="-27 0.8 15" rotation="0 90 0" width="2" height="1.6" depth="1"  color="#993399"></a-box>
      <a-box position="-27 2.6 17" rotation="0 90 0" width="2" height="5.2" depth="1"  color="#ff6600"></a-box>
      <a-box position="-27 2.8 19" rotation="0 90 0" width="2" height="5.6" depth="1"  color="#ff0066"></a-box>
      <a-box position="-27 3 21" rotation="0 90 0" width="2" height="6" depth="1"  color="#00ff00"></a-box>
      <a-box position="-27 3.3 23" rotation="0 90 0" width="2" height="6.6" depth="1"  color="red"></a-box>
      <a-box position="-27 4.3   25" rotation="0 90 0" width="2" height="8.6" depth="1"  color="blue"></a-box>
      <a-box position="-27 6 27" rotation="0 90 0" width="2" height="12" depth="1"  color="#4CC3D9"></a-box>
  
      <a-entity position="-27 11 42" rotation="0 90 0" text="text: 1.Rent                           27%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 11 42" rotation="0 90 0" text="text: 1.Rent                           27%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 9.5 42" rotation="0 90 0" text="text: 2.Groceries                18%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 9.5 42" rotation="0 90 0" text="text: 2.Groceries                18%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 8 42" rotation="0 90 0" text="text: 3.Bills                           14%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 8 42" rotation="0 90 0" text="text: 3.Bills                           14%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 6.5 42" rotation="0 90 0" text="text: 4.Transport              12%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 6.5 42" rotation="0 90 0" text="text: 4.Transport              12%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 5 42" rotation="0 90 0" text="text: 5.Eating Out             10%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 5 42" rotation="0 90 0" text="text: 5.Eating Out             10%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 3.5 42" rotation="0 90 0" text="text: 6.Entertainment     9%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 3.5 42" rotation="0 90 0" text="text: 6.Entertainment     9%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 2 42" rotation="0 90 0" text="text: 7.Holidays                  5%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 2 42" rotation="0 90 0" text="text: 7.Holidays                  5%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <a-entity position="-27 0.5 42" rotation="0 90 0" text="text: 8.Cash                          5%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0;" material="shader: flat; color:white;"></a-entity>
        <a-entity position="-27 0.5 42" rotation="0 90 0" text="text: 8.Cash                          5%; font: exo 2;  style: italic; size: 0.8; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1;" material="shader: flat; color:white;transparent: true; opacity: 0.4;"></a-entity>
      </a-entity>
      <script>
      // fetch('/balance').then(function(data) {
      //   return data;
      // }).then(function(data) {
      //   console.log(data);
      // })

      var domElementsToRemove = [];
      var height = -0.1;
      var coins = 100;
      var currentColumn = 0;
      var light = "#E8B03E";
      var dark = "#FFC65D";
      var lightPenny = "#b34848";
      var darkPenny = "#863333";
      var offset;
      var columnPositions = [-10, -8, -6, -4, -2, 0, 2, 4, 6, 8, 10, 12, 14, 16, 18];
      var money = 500.77;
      var change = (money % 1) * 100;
      money = money - (change/100);

      for(index = 0; index < money; index++)
        {
          height += 0.1;
          offset = Math.random() * 0.4;
          if (index % 50 == 0)
          {
            var height = -0.1;
            currentColumn = columnPositions.shift();
          }
          if (index % 2 == 0)
          {
            color = dark;
          }
          else
          {
            color = light;
          }
          document.write("<a-cylinder id='pound"+index+"' position='" + currentColumn + " " + height + " " + offset + "' rotation='0 30 0' width='1' height='.1' depth='1'  color='" + color + "' material='metalness:0.3';> <a-animation attribute='position' to='2 4 -8' begin='position'></a-animation><a-animation attribute='material.opacity' begin='fade' to='0'></a-animation></a-cylinder>")
        }

        for(index = 0; index < change; index++)
          {
            height += 0.1;
            offset = Math.random() * 0.4;
            if (index % 50 == 0)
            {
              var height = -0.1;
              currentColumn = columnPositions.shift();
            }
            if (index % 2 == 0)
            {
              color = darkPenny;
            }
            else
            {
              color = lightPenny;
            }
            document.write("<a-cylinder position='" + currentColumn + " " + height + " " + offset + "' rotation='0 30 0' width='0.1' height='.1' depth='1'  color='" + color + "' material='metalness:0.3';></a-cylinder>")
          }

          function moneyWithdraw(pounds, pence) {
            var localMoney = money-1;
            for (var i = pounds; i > 0; i--) {
              var id = 'pound' + localMoney--;
              // document.getElementById(id).removal();
              domElementsToRemove.push(id);
              document.getElementById(id).emit('position');
              document.getElementById(id).emit('fade');
            }

          }

          function moneyIncome(pounds, pence) {

          }

          setTimeout(function() {
            moneyWithdraw(134, 0)
          }, 5000);

          Element.prototype.removal = function() {
              this.parentElement.removeChild(this);
          }
          NodeList.prototype.removal = HTMLCollection.prototype.remove = function() {
              for(var i = this.length - 1; i >= 0; i--) {
                  if(this[i] && this[i].parentElement) {
                      this[i].parentElement.removeChild(this[i]);
                  }
              }
          }
      </script>
      <a-entity position="0 0 0"
        geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
        material="src: #grid; repeat: 10000 10000; transparent: true;metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

      <a-entity light="color: #ccccff; intensity: 0.2; type: ambient;" visible=""></a-entity>
      <a-entity light="color: ffaaff; intensity: 0.2" position="5 5 5"></a-entity>
      <a-entity light="color: white; intensity: 0.2" position="-5 5 15"></a-entity>
      <a-entity light="color: white; type: ambient;"></a-entity>

      <a-sky src="#sky" rotation="0 -90 0"></a-sky>
      <a-entity position="0 2 15">
        <a-camera></a-camera>
      </a-entity>
    </a-scene>


  </body>
</html>
